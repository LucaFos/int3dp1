<html>
	<head><title>Charles' Charts</title>

		<style>
			body {
				font-family: Monospace;
				background-color: #f0f0f0;
				margin: 0px;
				overflow: hidden;
			}
			
			canvas { 
				width: 100%; 
				height: 100%;
			}
		</style>
	</head>
	<body>
		<script src="libs/jquery-1.11.0.min.js"></script>
		<script src="libs/parser.js"></script>
		<script src="libs/libcharts.js"></script>
		<script src="libs/dat.gui.min.js"></script>
		<script src="libs/three.min.js"></script>
		<script src="libs/stats.min.js"></script>
		<script src="libs/controls/TrackballControls.js"></script>
		<script src="libs/fonts/helvetiker_regular.typeface.js"></script>
		<script src="libs/textutils.js"></script>
		<script src="libs/utils.js"></script>
		<script>
			var FizzyText = function() {
				this.Type = 'Bar';
				this.Example = 'Small';
			};
			
			/*
			 * jquery
			 */
			$( document ).ready(function() {
				//threejs
				var scene;
				var camera;
				var renderer;
				initScene();
				
				//gui
				var text = new FizzyText();
				var gui = new dat.GUI();
				var typeController = gui.add(text, 'Type', [ 'Bar', 'Area', 'Pie' ] );
				var exampleController = gui.add(text, 'Example', [ 'Small', 'Medium', 'Big', 'Similar Values', 'Wide labels' ] );
				
				typeController.onFinishChange(function(value) {
					generateChart(text.Type, text.Example);
				});
				
				exampleController.onFinishChange(function(value) {
					generateChart(text.Type, text.Example);
				});
				
				function generateChart(type, example)
				{
					clearScene();
					
					var filestring;
					
					switch(example){
						case 'Small':
							filestring = "csv/small.csv";
							break;
						case 'Medium':
							filestring = "csv/medium.csv";
							break;
						case 'Big':
							filestring = "csv/big.csv";
							break;
						case 'Similar Values':
							filestring = "csv/similar.csv";
							break;
						case 'Wide labels':
							filestring = "csv/wide_labels.csv";
							break;
						default:
							break;
					}
					
					$.get(filestring, function (data) { showChart(data,type); });
				}
				function showChart(csvfile, type)
				{
					var file = fromCsvToAssociative(csvfile);
					
					if(type == 'Bar'){
						barChart(file);
					} else if (type == 'Area') {
						areaChart(file);
					} else if (type == 'Pie') {
						pieChart(file);
					} else {
						alert('unknown error!');
					}
				}
			});
		</script>
	</body>
</html>
